{"componentChunkName":"component---node-modules-nehalist-gatsby-theme-nehalem-src-templates-post-tsx","path":"/2021-04-28-google-tag-manager","result":{"data":{"post":{"id":"901ce8fc-ed43-51eb-bee8-2f475b6f8911","headings":[{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":3},{"depth":3},{"depth":2},{"depth":2},{"depth":3},{"depth":3},{"depth":3}],"frontmatter":{"title":"React 프로젝트에 Google Tag Manager 설정하기","path":"/2021-04-28-google-tag-manager","tags":["web","react","data"],"excerpt":"Google  Tag Manager의 원리를 알아보자","created":"2021-04-28T00:00:00.000Z","createdPretty":"28 April, 2021","updated":"2021-04-28T00:00:00.000Z","updatedPretty":"28 April, 2021","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAADL0lEQVQ4y52TaUzURxjGn78rNbGmwTaaGPEIIk2sCNTs4rJkFwQqNPU2HpEQqdpwqJRVORJ2seWShXIs7H93NUpTxQNRvDC2qyA9UhNSNQaPqhhp0g/Gpil3uyzzdBar6cfSSZ5MZvLO731nnnfA2mWgMxGibCGE3aARJcFTRE3UZDqiFYCI3PYLVn09qpjZg5i2F8qbqZwSlvdCQwI/PcxRVl/4E3hXLuIJvUvO40DrTLAqEqyJgliLt31dp8CKIPA6oNvxDOvbfTBdGgJ5C4gRIfJUQHFjK07cPI6k5lH4E2MBsUx9BTy4CCyer7DOsJF2Q7aoi9lFddHszuIsNOZUKFGqqNA5xVWdc6xVp/J8tOo7v1wdOGdShz3aemFOOOFD8mmvssTmB9YZIGyLwbKFAaLe2CMa4sgGE4dr4tbDROO0FSPaqKPeB0k/P2Xy40fUNpGfnmznbzcjeaPjYxrdQxfzv+vEV7cPKRFVfqDdDwyTbxgaIBpMT4RjOekwsqtk+04kcvMbH3jXhdm9jzZ473ITu8Z0TRQHWs4IPsdob7eWsa7B5pL2K2i7//k/wDq9fK/3wNIFGtpjXKw3tstKPWwIX5qW3gZZJfSHxr41Xhxg7OU/BnSHOfThkedDJS2n+nef7KTeMXrM1DaGtG96FZ3NK4FH1kgzdNKUCPBYCng2C8NNmeAz4J0N/RokiEmhhZwRnMo587cwKP7A73NRyunfm5sL95t/NcBDzWVLM4qL7oA5gXgJ8Rvzxfvghf0QP34Jca1S7n8E2SnYkkwsKSVC04iQFHmlWuLGZy3gvtQEmteFMyctyJdXEDRSYAVz90lgtdZvCETRLAh/29TqxxN4q/Xos8XKACK8koq+6i9lZXWfEr/7njLoapztKz+41WurShopr5zFzIyAHhnny83Hfx50OCSbEB4PhNPpodtNulyk05lCux3C4dAwN3eCwHnzwO5u+bOcP7wGquoncg05/w+grJAdHX5gi3C7+4TL1SdBm6UgJBATGSws/LcW02JJlIql1RoorNIQiwUTA2bKVtq796Wys6dyz563mJU1lenpk6TAjIzxuL8BjTfV+vRvnlIAAAAASUVORK5CYII=","aspectRatio":1.4184397163120568,"src":"/static/a0941cdab499d9ad7ef98ec02d9c4cac/9f8d2/GTM.png","srcSet":"/static/a0941cdab499d9ad7ef98ec02d9c4cac/dc47e/GTM.png 200w,\n/static/a0941cdab499d9ad7ef98ec02d9c4cac/9f2d5/GTM.png 400w,\n/static/a0941cdab499d9ad7ef98ec02d9c4cac/9f8d2/GTM.png 640w","sizes":"(max-width: 640px) 100vw, 640px"}}}},"html":"<p>GTM을 이용하면 Application에서 일어나는 특정 이벤트를 감지하여 측정할 수 있다. GTM의 작동 원리를 한 번 알아보자.  </p>\n<h2 id=\"gtm의-작동원리\" style=\"position:relative;\"><a href=\"#gtm%EC%9D%98-%EC%9E%91%EB%8F%99%EC%9B%90%EB%A6%AC\" aria-label=\"gtm의 작동원리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[ GTM의 작동원리 ]</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a0941cdab499d9ad7ef98ec02d9c4cac/6af66/GTM.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAADL0lEQVQ4y52TaUzURxjGn78rNbGmwTaaGPEIIk2sCNTs4rJkFwQqNPU2HpEQqdpwqJRVORJ2seWShXIs7H93NUpTxQNRvDC2qyA9UhNSNQaPqhhp0g/Gpil3uyzzdBar6cfSSZ5MZvLO731nnnfA2mWgMxGibCGE3aARJcFTRE3UZDqiFYCI3PYLVn09qpjZg5i2F8qbqZwSlvdCQwI/PcxRVl/4E3hXLuIJvUvO40DrTLAqEqyJgliLt31dp8CKIPA6oNvxDOvbfTBdGgJ5C4gRIfJUQHFjK07cPI6k5lH4E2MBsUx9BTy4CCyer7DOsJF2Q7aoi9lFddHszuIsNOZUKFGqqNA5xVWdc6xVp/J8tOo7v1wdOGdShz3aemFOOOFD8mmvssTmB9YZIGyLwbKFAaLe2CMa4sgGE4dr4tbDROO0FSPaqKPeB0k/P2Xy40fUNpGfnmznbzcjeaPjYxrdQxfzv+vEV7cPKRFVfqDdDwyTbxgaIBpMT4RjOekwsqtk+04kcvMbH3jXhdm9jzZ473ITu8Z0TRQHWs4IPsdob7eWsa7B5pL2K2i7//k/wDq9fK/3wNIFGtpjXKw3tstKPWwIX5qW3gZZJfSHxr41Xhxg7OU/BnSHOfThkedDJS2n+nef7KTeMXrM1DaGtG96FZ3NK4FH1kgzdNKUCPBYCng2C8NNmeAz4J0N/RokiEmhhZwRnMo587cwKP7A73NRyunfm5sL95t/NcBDzWVLM4qL7oA5gXgJ8Rvzxfvghf0QP34Jca1S7n8E2SnYkkwsKSVC04iQFHmlWuLGZy3gvtQEmteFMyctyJdXEDRSYAVz90lgtdZvCETRLAh/29TqxxN4q/Xos8XKACK8koq+6i9lZXWfEr/7njLoapztKz+41WurShopr5zFzIyAHhnny83Hfx50OCSbEB4PhNPpodtNulyk05lCux3C4dAwN3eCwHnzwO5u+bOcP7wGquoncg05/w+grJAdHX5gi3C7+4TL1SdBm6UgJBATGSws/LcW02JJlIql1RoorNIQiwUTA2bKVtq796Wys6dyz563mJU1lenpk6TAjIzxuL8BjTfV+vRvnlIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"GTM.png\"\n        title=\"GTM.png\"\n        src=\"/static/a0941cdab499d9ad7ef98ec02d9c4cac/6af66/GTM.png\"\n        srcset=\"/static/a0941cdab499d9ad7ef98ec02d9c4cac/5a46d/GTM.png 300w,\n/static/a0941cdab499d9ad7ef98ec02d9c4cac/0a47e/GTM.png 600w,\n/static/a0941cdab499d9ad7ef98ec02d9c4cac/6af66/GTM.png 640w\"\n        sizes=\"(max-width: 640px) 100vw, 640px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>  </p>\n<p>Application과 GTM을 연결하면 Application에서 일어나는 Event들을 GTM으로 보낼 수 있다. Application이 GTM으로 Event를 보내면 GTM은 해당 event가 등록되어 있는 Trigger가 있는지 확인하고 매칭되면 그 Trigger와 연결된 Tag 정보를 GA에 전달한다.  </p>\n<ul>\n<li>Tag  </li>\n<li>Trigger  </li>\n<li>Variables  </li>\n</ul>\n<h2 id=\"react-project에-gtm-연결하기\" style=\"position:relative;\"><a href=\"#react-project%EC%97%90-gtm-%EC%97%B0%EA%B2%B0%ED%95%98%EA%B8%B0\" aria-label=\"react project에 gtm 연결하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[ React Project에 GTM 연결하기 ]</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> react-gtm-module</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> TagManager <span class=\"token keyword\">from</span> <span class=\"token string\">'react-gtm-module'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> tagManagerArgs <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  gtmId<span class=\"token operator\">:</span> <span class=\"token string\">'GTM-KG6PFHT'</span>\n<span class=\"token punctuation\">}</span>\n\nTagManager<span class=\"token punctuation\">.</span><span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span>tagManagerArgs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>최상위 App에 TagManager를 등록해주자.</p>\n<h2 id=\"태그-tag\" style=\"position:relative;\"><a href=\"#%ED%83%9C%EA%B7%B8-tag\" aria-label=\"태그 tag permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[ 태그 (Tag) ]</h2>\n<p>태그에서는 Application에서 어떤 행위가 일어날 때 기록할 정보들을 지정할 수 있다. 기본적으로 해당 Event의 Category, Action, Label을 지정하고 추가적인 데이터를 더 저장할 수도 있다. 간단하게 Login 태그를 만들어보자.<br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/473c068172e1f86f902f02218d6aa01a/599ea/tag.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 90.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAABOklEQVQ4y62U63KEIAyFff/XbDvrVHCVm4uCpzmutrr9UdwtM4kjxM9DAql6Y9F1HZRS6HuDnDNSysuz1Bg/zzOMdajoYhyXhf1gwBnjMI5AF4DJwJkrLnWNpmmgtUbbtpimaQnOf8CoMKW0KnQeYwyItxviOIra+A06q9BSIV1vDEaB7bfLP5aOA5Ayvfdw8kJ7BJfm8wAMIWASRdsitzwMwwF2SiHzxir/JDktc08B6agwPSjk3NMKhzD8At6k6s8DhyPwpS0TuH2U838oFEcAFW0qXy4Kz19cz99dKSue1/e7O3UOL6rHe63xdlFQnUcQto/z4WAXK+wJ1BYfAqR9agMt0KuNxfc477uNleaw5YzGq8eC5Fx+l7fh5ApX7bVbGmwjDbZpFKy1klO/PI00X2MLTOIYT9YXLJGJ2Oyb8EUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tag.png\"\n        title=\"tag.png\"\n        src=\"/static/473c068172e1f86f902f02218d6aa01a/c1b63/tag.png\"\n        srcset=\"/static/473c068172e1f86f902f02218d6aa01a/5a46d/tag.png 300w,\n/static/473c068172e1f86f902f02218d6aa01a/0a47e/tag.png 600w,\n/static/473c068172e1f86f902f02218d6aa01a/c1b63/tag.png 1200w,\n/static/473c068172e1f86f902f02218d6aa01a/d61c2/tag.png 1800w,\n/static/473c068172e1f86f902f02218d6aa01a/599ea/tag.png 1926w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n인증과 관련된 내용이라 Category를 Auth로 설정하고, Action과 Label은 Login으로 설정하였다. 우리는 GA에서 태그 데이터를 이용하기 위해 Type을 Google Analytics: Universal Analytics로 설정했는데, GA와 연결하기 위한 <strong>Google Analytics Settings</strong>을 설정해 주어야 한다.<br>\nGA Setting 변수를 만들어 두지 않았다면 새로 만들어서 연결해주자.<br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ea8a358dd7a9a988698e119a0587770e/9ce1c/GA-setting.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 44.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAu0lEQVQoz52S2w6DIBBE+f8vrYkFuctFpoypRp8q3WQFsuQws6sw1kJKBakU5nlGjBG1VpSRLBV12+BDgHDOIQaHlNIOOqK1NpSM0MUIUt+2wVgHozWWZYH3fhi4HQr50aFhTRm5q6TSUsqwyhPouhprNIwxaF+7BK7rOgS9WWZyOOwhiwTmnE/gr7gBbR8Ke0YIZbNI2yz+pTB2a0cPri9ez0+DLKH6VKWUeE0TuLfdOu3vq3mevM9/+QMjtcPXtpcfKwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"GA-setting.png\"\n        title=\"GA-setting.png\"\n        src=\"/static/ea8a358dd7a9a988698e119a0587770e/c1b63/GA-setting.png\"\n        srcset=\"/static/ea8a358dd7a9a988698e119a0587770e/5a46d/GA-setting.png 300w,\n/static/ea8a358dd7a9a988698e119a0587770e/0a47e/GA-setting.png 600w,\n/static/ea8a358dd7a9a988698e119a0587770e/c1b63/GA-setting.png 1200w,\n/static/ea8a358dd7a9a988698e119a0587770e/d61c2/GA-setting.png 1800w,\n/static/ea8a358dd7a9a988698e119a0587770e/9ce1c/GA-setting.png 1886w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\nTracking ID에는 만들어 둔 GA Application의 추적 ID (UA-XXXXXX-X)를 넣어주면 된다.<br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4d553c305704c2ecb5bd6558ded9dd29/89557/tag-trigger.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 87.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAABIUlEQVQ4y61Ui1KEMAzk//9TPESQR5u20LImreh5PCxqZjKFEnY2ySaFJoOu79G0LZRSuLdlWRBCYF/PY5dYshYFGQtnDSy/KK1BRNE1P3vvOTAB/+RixjoGtBPgOpDqUb82aJoGXddFtglwyQYUcoU2BuM4YpomPFouu28MpYaS4lqHx6Ac2wBKeutlLqMThsSA4wbwiu2krHfZ/Sllkc2/pEzc5bquUVUVd3uAcw6/tU+GIhnDGjLMUqbC+wAfLrhP0xR1qBhwGIY4JTMLeZrnXZ8P7r++ewi5OHqiw7WGR0XPadJHDe3mx3sAOZ9vNZ7KKor/qHEbwKOgBPiCsrxdA9wzWQ5SireB0PapLHJ33mWWTVjO951xAeQy9iGTewdUdj6hkKTqTgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tag-trigger.png\"\n        title=\"tag-trigger.png\"\n        src=\"/static/4d553c305704c2ecb5bd6558ded9dd29/c1b63/tag-trigger.png\"\n        srcset=\"/static/4d553c305704c2ecb5bd6558ded9dd29/5a46d/tag-trigger.png 300w,\n/static/4d553c305704c2ecb5bd6558ded9dd29/0a47e/tag-trigger.png 600w,\n/static/4d553c305704c2ecb5bd6558ded9dd29/c1b63/tag-trigger.png 1200w,\n/static/4d553c305704c2ecb5bd6558ded9dd29/d61c2/tag-trigger.png 1800w,\n/static/4d553c305704c2ecb5bd6558ded9dd29/89557/tag-trigger.png 1928w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n위에서 Tag에서 보낼 여러 정보들을 설정했는데, 이 정보들을 언제 보낼지에 대한 Trigger가 필요하다. Trigger를 만들어서 Tag와 연결해주자.  </p>\n<h2 id=\"트리거-trigger\" style=\"position:relative;\"><a href=\"#%ED%8A%B8%EB%A6%AC%EA%B1%B0-trigger\" aria-label=\"트리거 trigger permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[ 트리거 (Trigger) ]</h2>\n<p>Trigger는 event를 감지하고 조건에 맞는 event가 발생하면 연결된 Tag를 발동(Fire) 시켜주는 역할을 한다.  </p>\n<h3 id=\"-정의된-event-\" style=\"position:relative;\"><a href=\"#-%EC%A0%95%EC%9D%98%EB%90%9C-event-\" aria-label=\" 정의된 event  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>&#x3C; 정의된 Event ></h3>\n<p>미리 정의되어 있는 Event를 이용하면 한 번 연결된 Application은 더이상 코드에 관여하지 않고도 Event를 발생시킬 수 있다. Web Application의 경우 Page View, Click, ... 등이 있다.  Click Event를 이용한 Trigger를 한 번 만들어 보자.  </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1145px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/837fe78ab8b55bc719378e6fe2d66ba4/c61d0/trigger-click.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAr0lEQVQoz6WR6wrDMAiF+/7PusHIRZOYeKbpWLuyH90qSMDIp56zEBFijAghIOcMVb2USy0MpoxaK0TEirgGzK3jTgJpFcyM1tpfoDEGeu8GFMWtDFQmpJTmph6/Ah02gc0AxU+2TfvALHrDPvTUgLV3YS5mSkDMDY/ISGbQquV2hurAuXBT6qqdSHulzLPdcSL+MMsHuMb+ftVRd8Cjbl476ukgHyLS34Dtz3S0fAJvQXhz+qkpBgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"trigger-click.png\"\n        title=\"trigger-click.png\"\n        src=\"/static/837fe78ab8b55bc719378e6fe2d66ba4/c61d0/trigger-click.png\"\n        srcset=\"/static/837fe78ab8b55bc719378e6fe2d66ba4/5a46d/trigger-click.png 300w,\n/static/837fe78ab8b55bc719378e6fe2d66ba4/0a47e/trigger-click.png 600w,\n/static/837fe78ab8b55bc719378e6fe2d66ba4/c61d0/trigger-click.png 1145w\"\n        sizes=\"(max-width: 1145px) 100vw, 1145px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>이렇게 ( id=\"login\"이라는 element를 클릭할 때만 발동 ) 조건을 달아주면 모든 Click을 인식하지 않고 우리가 id=\"login\"이라고 달아둔 로그인 버튼의 Click만 측정할 수 있다.  </p>\n<p><em>필자의 경우 미리 정의된 &#x3C; Click - Just Links > Trigger는 a 태그에 id를 지정하고 조건을 달아주면 잘 동작했는데, &#x3C; Click - All Elements >로 했을 때는 Trigger가 제대로 발동하지 않았다. 아마 Click 했을 때 겹치는 부분에 있던 다른 Element가 Click된 것 같다. 좀 더 공부하고 다시 해봐야겠다.)</em>  </p>\n<h3 id=\"-custom-trigger-\" style=\"position:relative;\"><a href=\"#-custom-trigger-\" aria-label=\" custom trigger  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>&#x3C; Custom Trigger ></h3>\n<p>일반적으로 Application에서 일어나는 일반적인 행위가 아닌, Login 성공 등의 Event는 Custom Event를 이용할 수 있다.  </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/43bdaa89fec5c7abc286db212c6a4010/84a78/Untitled%202.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAs0lEQVQoz52S2woDIQxE/f+/7HNZXO+6UaeJRWmfVjYwCGpOMlHlnMNxHENaa/Te0Vpj8do31L73JVJKUKUUxJTHpsCe6A9I0SG/X7A+wFr7GFprRYiRgSWj+BNElUU/l7BiFxqlw8R2xfJMnNZz5kI8juu6RvU78LDMOYpIEmglzBCwdDyBd92tGYZEOI2FMWYB5EA0h70bmR0pbSOMdfwgBt778TAiKRBCGNZ3JOOx/AU/D4B2hXchvF0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled 2.png\"\n        title=\"Untitled 2.png\"\n        src=\"/static/43bdaa89fec5c7abc286db212c6a4010/c1b63/Untitled%202.png\"\n        srcset=\"/static/43bdaa89fec5c7abc286db212c6a4010/5a46d/Untitled%202.png 300w,\n/static/43bdaa89fec5c7abc286db212c6a4010/0a47e/Untitled%202.png 600w,\n/static/43bdaa89fec5c7abc286db212c6a4010/c1b63/Untitled%202.png 1200w,\n/static/43bdaa89fec5c7abc286db212c6a4010/d61c2/Untitled%202.png 1800w,\n/static/43bdaa89fec5c7abc286db212c6a4010/84a78/Untitled%202.png 1832w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> TagManager <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-gtm-module\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> tagManagerArgs <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  dataLayer<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    event<span class=\"token operator\">:</span> <span class=\"token string\">\"login\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\nTagManager<span class=\"token punctuation\">.</span><span class=\"token function\">dataLayer</span><span class=\"token punctuation\">(</span>tagManagerArgs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>위와 같이 Event name을 \"login\"으로 설정해두고, 로그인에 성공했을 때 Application에서 \"login\" event를 전송해 주면 Trigger가 발동된다.</p>\n<p><em>이때 주의할 점은 Trigger에서 등록한 Event name과 코드에서 보내는 event의 값이 정확하게 같아야 한다.</em>  </p>\n<h2 id=\"gtm-debug\" style=\"position:relative;\"><a href=\"#gtm-debug\" aria-label=\"gtm debug permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[ GTM Debug ]</h2>\n<p>태그와 트리거를 만들어서 연결했으니 실제로 Application에서 Event가 발생할 때 내가 설정한 대로 Tag가 동작하는지 테스트해보자. GTM 오른쪽 상단에 보면 Preview라는 버튼을 누르면 아래와 같은 화면이 나온다.<br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/741524960dca4520b45e1700d3ebdf94/252a4/GTM-debug-connect.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 80.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAACJ0lEQVQ4y4WUSW7bQBBFda7kSLlDtjlGgCyyTja5QOBVEjgIkMG2bA0cREkcm2NP/K5qkrIgS3EDT9Ustn4P9ZszpRTqukZVVY6yLF1smobyHFsY28Na6+h7e+g/5XqwTtd1mEkpEccxdrudI4oibLdbJEninosiw3Hrcb4ZY0hQYsbKL7XPPxSubrWT49Wcg5tSehA8N4C3yQLXC40372t8+Cqxjq37ox0FnguqpxWeClrHsMKPVw2+/GzGcRP9BUGtL2zUoi4LVCKD6QrorkRTFShFgd6akxMdoiatGf+EmYWfGHjEOjZY7g1WMaOx2mssdtrlmL2wyKoe6Ql53UOqUXBTAH7aw3MAq6R3rNORBFjS+S12LDgIJCXFcurTJJMge2cTeAj9FfZR4KK3WuDm3288zG8RhT42oYc8iyHyBGkSo8gzZFmKNE2onyOjaLQatsw+zESLRHQ0YwdRtc7Qk9nZ4CVFbcyL9nKCTafxfV7h203quJ6ntDV12DofRZgDQWoP53uOu8ig6ajKndS43zR4CAXuA4G5X2C9lwioUGFqcBtp/PKU4y4aCsji/D4Y+5xbJxYtC+oLtpm89fZTidfvYrwiuH/87vRCjrY5NvYYRwNL2WG5rfHHq/DXr7GIKijKnTM255yxW9oy1cOZlS/49AVxl50KRtfemXxgGPPfouRVR+alSgoqP1kgJwohHFxpSbNKSZ8mgvvKPctncL5tWzwCIJvUoQgTRjUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"GTM-debug-connect.png\"\n        title=\"GTM-debug-connect.png\"\n        src=\"/static/741524960dca4520b45e1700d3ebdf94/c1b63/GTM-debug-connect.png\"\n        srcset=\"/static/741524960dca4520b45e1700d3ebdf94/5a46d/GTM-debug-connect.png 300w,\n/static/741524960dca4520b45e1700d3ebdf94/0a47e/GTM-debug-connect.png 600w,\n/static/741524960dca4520b45e1700d3ebdf94/c1b63/GTM-debug-connect.png 1200w,\n/static/741524960dca4520b45e1700d3ebdf94/252a4/GTM-debug-connect.png 1314w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p> 테스트 환경 서버를 돌려놓고 주소를 연결해주면 된다.  </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0cc7f36fafa7b559f4002679b762de3b/39472/GTM-debug.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAuklEQVQoz62R6w6CMAxG9/7v6G9EHcju989uQFQCMVGXnDRrt7OmY3wcceUcdyFhnYc2FuoQ87HGTp0EnwyEENBaIziHlBJSzjPpSd7s92qsHzRGYWDILqSCsR5hc3AlhNAee8291Siy7txjkpJEASEW+JDhiJgKiQtyKQBRiJznuEeV1sgut4GECrJKaQ7WWnjvMa/SWC+1zIFwrbEqU3qZIQljTPhlsfq7YpFKpVs01KX+ktZhlf6LBydLcTkY4hkAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"GTM-debug.png\"\n        title=\"GTM-debug.png\"\n        src=\"/static/0cc7f36fafa7b559f4002679b762de3b/c1b63/GTM-debug.png\"\n        srcset=\"/static/0cc7f36fafa7b559f4002679b762de3b/5a46d/GTM-debug.png 300w,\n/static/0cc7f36fafa7b559f4002679b762de3b/0a47e/GTM-debug.png 600w,\n/static/0cc7f36fafa7b559f4002679b762de3b/c1b63/GTM-debug.png 1200w,\n/static/0cc7f36fafa7b559f4002679b762de3b/d61c2/GTM-debug.png 1800w,\n/static/0cc7f36fafa7b559f4002679b762de3b/97a96/GTM-debug.png 2400w,\n/static/0cc7f36fafa7b559f4002679b762de3b/39472/GTM-debug.png 3636w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>왼쪽 사이드바에는 발생한 Event 이름이 나온다. 우리가 Application에서 보내준 login 이벤트를 확인할 수 있다. 그리고 Tags 탭에서 어떤 Tag가 발동되었는지 나타난다. 우리가 login Event로 연결한 Login 태그가 발동된 것을 확인할 수 있다.</p>\n<h2 id=\"변수-variables\" style=\"position:relative;\"><a href=\"#%EB%B3%80%EC%88%98-variables\" aria-label=\"변수 variables permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[ 변수 (Variables) ]</h2>\n<p>GTM에서는 다양한 종류의 변수를 정의하고 사용할 수 있다. 앞에서 만들었던 GA-Setting도 변수를 만들어서 사용한 것이다. GTM에서 변수에는 크게 <strong>Built-In Variable</strong>과 <strong>User-Defined Variable</strong>로 나눌 수 있다.  </p>\n<h3 id=\"-built-in-variables-\" style=\"position:relative;\"><a href=\"#-built-in-variables-\" aria-label=\" built in variables  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>&#x3C; Built-In Variables ></h3>\n<p>Built-In 변수는 Event가 일어날 때 해당 Event에 대한 정보를 가져올 수 있다. 앞에서 Click Event를 이용한 트리거를 만들어봤는데, Login 버튼을 Click 했을 때, 그 버튼의 텍스트를 가져오고 싶다고 하자. 그러면 Click Text라는 Built-In Variable을 사용할 수 있다.<br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cf747c6e391fa3dd3764ffd7a01f2ba0/29007/built-in-variables.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAA+0lEQVQoz6WTy3KEIBBF+f9PTLLIuIny8IEgAsJNy2hqJskiwa46ZQFyu+E2LIQA7z2UUpBSQgiBvu/RdR0453DO4S+RUio6zK0rjLVomoZE7gI7luasXRBCRM6ZNhD5d+7rCTFuYCF47FXubNv2I/P5cxEs3+8c84cw40pj1IYGiQTTo9TB/4K9tBF8XMHbD0i6R0pSsuZcB3vtIsToMChZ7u08ZrXgW7uglRqCHF3JJb+7fgE2jT1Ur/B+a8CFhFkcZmMxk8M1MDU5MsVS/3GyPV4/8k1tGEzANA6l5K82ybkK5hZDjbw89d2lCic9Q2tdntr+/E7R2vgE3iWu8KRC1I4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"built-in-variables.png\"\n        title=\"built-in-variables.png\"\n        src=\"/static/cf747c6e391fa3dd3764ffd7a01f2ba0/c1b63/built-in-variables.png\"\n        srcset=\"/static/cf747c6e391fa3dd3764ffd7a01f2ba0/5a46d/built-in-variables.png 300w,\n/static/cf747c6e391fa3dd3764ffd7a01f2ba0/0a47e/built-in-variables.png 600w,\n/static/cf747c6e391fa3dd3764ffd7a01f2ba0/c1b63/built-in-variables.png 1200w,\n/static/cf747c6e391fa3dd3764ffd7a01f2ba0/29007/built-in-variables.png 1600w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n필요한 Builit-In 변수를 체크해두면 Event가 일어날 때마다, Application에서 해당 변수값을 같이 보낸다.  </p>\n<h3 id=\"-user-defined-variables-\" style=\"position:relative;\"><a href=\"#-user-defined-variables-\" aria-label=\" user defined variables  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>&#x3C; User-Defined Variables ></h3>\n<p>User-Defined Variable은 우리가 직접 값을 설정해줄 수 있다. Constant Variables의 경우 설정한 값을 그대로 가지고 있다. 너무 길거나 외우기 힘들 때 이런 변수를 사용할 수 있다.<br>\n여기서 유용하게 살펴볼 변수는 Data Layer Variable이다. 이 변수를 사용하면 Custom Event를 보낼 때 같이 넣어준 데이터를 가져올 수 있다.  </p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> TagManager <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-gtm-module\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> randomName <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0.5</span> <span class=\"token operator\">?</span> <span class=\"token string\">\"Googy\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"Letters\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> tagManagerArgs <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  dataLayer<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    event<span class=\"token operator\">:</span> <span class=\"token string\">\"login\"</span><span class=\"token punctuation\">,</span>\n    userName<span class=\"token operator\">:</span> randomName\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\nTagManager<span class=\"token punctuation\">.</span><span class=\"token function\">dataLayer</span><span class=\"token punctuation\">(</span>tagManagerArgs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>앞에서 만든 login event에 userName이라는 data를 추가하여 보냈다.<br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/01ba1d9e75c9d99fb582b45ee0f88854/bf9ea/dataLayer-variable.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAp0lEQVQoz5WSgQ6DIAxE+f9vnYmUCjict54T3BLHXJMXENLHpdHdhgGj97iX0ihlQVl23s6v4EQnkFFCw4vA+9EQzPN8WSpB4ZrEPgj3wR6YYt5ki6VkreuK09qPec8+V0WHUKAm8/EB1YCUUmvowYdF9RDWlK+ECg3SEnKtCc+FJwk/hLaS2sAZ/krYFeoUEWNEzhn/1FehBNvbr0QoJanDdm+z5vyfuutxgTfgW30AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"dataLayer-variable.png\"\n        title=\"dataLayer-variable.png\"\n        src=\"/static/01ba1d9e75c9d99fb582b45ee0f88854/c1b63/dataLayer-variable.png\"\n        srcset=\"/static/01ba1d9e75c9d99fb582b45ee0f88854/5a46d/dataLayer-variable.png 300w,\n/static/01ba1d9e75c9d99fb582b45ee0f88854/0a47e/dataLayer-variable.png 600w,\n/static/01ba1d9e75c9d99fb582b45ee0f88854/c1b63/dataLayer-variable.png 1200w,\n/static/01ba1d9e75c9d99fb582b45ee0f88854/d61c2/dataLayer-variable.png 1800w,\n/static/01ba1d9e75c9d99fb582b45ee0f88854/97a96/dataLayer-variable.png 2400w,\n/static/01ba1d9e75c9d99fb582b45ee0f88854/bf9ea/dataLayer-variable.png 2716w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n그러면 GTM의 variable 설정에서 Data Layer Variable Name을 코드에서 정한 대로 userName이라고 설정하여 변수를 만들고 활용할 수 있다.  </p>\n<h3 id=\"-태그에서-변수-사용하기-\" style=\"position:relative;\"><a href=\"#-%ED%83%9C%EA%B7%B8%EC%97%90%EC%84%9C-%EB%B3%80%EC%88%98-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0-\" aria-label=\" 태그에서 변수 사용하기  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>&#x3C; 태그에서 변수 사용하기 ></h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7adc5dc241704bf2bba7b210d006a97d/f705e/tag-variable.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAvElEQVQoz62TbQ+DIAyE/f+/drxZwELXI5M4ozK3NbnwAXjSK8dknBfoYV1bja7Oe2EuwqXIsrBqORbz+13VtAemGCQoMIQg8zwrmAVVaz3UGEheYiQhIkkpSdEuz2DYGwKdAzC2w5/UNVAFm5gPgDnn1smZ5THQKVCtrhdgeQtc6xaQXsDyH6BXy9St7i1/BURc1s4wy7qD3JyhF9sfhns0fgRaMcY06wCP4mNHQGQQtjE//BIAr4SobYFPNNOpg7hYkB8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tag-variable.png\"\n        title=\"tag-variable.png\"\n        src=\"/static/7adc5dc241704bf2bba7b210d006a97d/c1b63/tag-variable.png\"\n        srcset=\"/static/7adc5dc241704bf2bba7b210d006a97d/5a46d/tag-variable.png 300w,\n/static/7adc5dc241704bf2bba7b210d006a97d/0a47e/tag-variable.png 600w,\n/static/7adc5dc241704bf2bba7b210d006a97d/c1b63/tag-variable.png 1200w,\n/static/7adc5dc241704bf2bba7b210d006a97d/d61c2/tag-variable.png 1800w,\n/static/7adc5dc241704bf2bba7b210d006a97d/97a96/tag-variable.png 2400w,\n/static/7adc5dc241704bf2bba7b210d006a97d/f705e/tag-variable.png 2998w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n태그에서 필요한 곳에 {{변수명}} 이렇게 설정하면 변수의 값이 들어간다. (+ 버튼을 눌러서 사용할 변수를 추가할 수도 있다.)<br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/765df93a51c096fafcf1bc3dd0a1ca9e/aaba6/tag-detail.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAtElEQVQoz42R2w7DIAhA/f8vXbKH1aJYL8iAzaTpWleTUzGVI6J7vJ68lcy1Vi5KKRbX1ox2YOwp5bv/gFtDZL8GXlZgjRfvOefMOqh3JqId3f4hImPaOAqat8fpx8NHCCJETAyyDlHilKyquqM1MvQArXLkD9wITCgSAOAY0USa1KXKM3T8F1qFKD0kS7iSnQnH/CMMQpPm8kR2W6iPkrRv0viZTB9H59vCKpD0sE+ufVXhG+6GcRj2NAo3AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tag-detail.png\"\n        title=\"tag-detail.png\"\n        src=\"/static/765df93a51c096fafcf1bc3dd0a1ca9e/c1b63/tag-detail.png\"\n        srcset=\"/static/765df93a51c096fafcf1bc3dd0a1ca9e/5a46d/tag-detail.png 300w,\n/static/765df93a51c096fafcf1bc3dd0a1ca9e/0a47e/tag-detail.png 600w,\n/static/765df93a51c096fafcf1bc3dd0a1ca9e/c1b63/tag-detail.png 1200w,\n/static/765df93a51c096fafcf1bc3dd0a1ca9e/d61c2/tag-detail.png 1800w,\n/static/765df93a51c096fafcf1bc3dd0a1ca9e/97a96/tag-detail.png 2400w,\n/static/765df93a51c096fafcf1bc3dd0a1ca9e/aaba6/tag-detail.png 3374w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n디버그 모드에서 발동된 Login Tag의 값을 보니 Application에서 보내준 데이터가 값으로 들어간 것을 확인할 수 있다.<br>\n모두 테스트했다면 잊지 말고, Publish 해주고, 다음에 Google Analytics에서 기록된 Event를 확인해보자.  </p>"},"primaryTag":null},"pageContext":{"postId":"901ce8fc-ed43-51eb-bee8-2f475b6f8911","primaryTag":"web"}},"staticQueryHashes":["1116962356","1994268275","2206391224","2275848304","545095672"]}