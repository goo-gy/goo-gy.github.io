{"componentChunkName":"component---node-modules-nehalist-gatsby-theme-nehalem-src-templates-post-tsx","path":"/2021-08-13-gnuradio","result":{"data":{"post":{"id":"8c559912-7646-54e7-a1ba-ef65e2d23777","headings":[{"depth":2},{"depth":2},{"depth":2},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":2},{"depth":2},{"depth":2}],"frontmatter":{"title":"GNU Radio를 이용한 SDR 프로그래밍","path":"/2021-08-13-gnuradio","tags":["project","network","gnuradio","SDR"],"excerpt":"GNU Radio를 이용하여 Software Defined Radio 프로그래밍","created":"2021-08-13T00:00:00.000Z","createdPretty":"13 August, 2021","updated":"2021-08-13T00:00:00.000Z","updatedPretty":"13 August, 2021","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIDBAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHcrNKOMH//xAAZEAEBAQADAAAAAAAAAAAAAAACAREAAxD/2gAIAQEAAQUCSgk7d4dxhVkQ+f/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABoQAAMAAwEAAAAAAAAAAAAAAAABERAhMlH/2gAIAQEABj8CrZeUbKoevH//xAAbEAADAAIDAAAAAAAAAAAAAAAAASEQMUFhgf/aAAgBAQABPyGcQy3QuWOyvcaZHKXPR4//2gAMAwEAAgADAAAAEODP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAIBABAAEEAAcAAAAAAAAAAAAAAREAQWFxECExUYGx4f/aAAgBAQABPxCGIWLuin0kesT4e+KAiHziIjealwgAlJn5T4/TaLcP/9k=","aspectRatio":1.3513513513513513,"src":"/static/5f5a2cefb58bb96bdd87d815f55a9c14/e0a14/RTL-SDR.jpg","srcSet":"/static/5f5a2cefb58bb96bdd87d815f55a9c14/8850c/RTL-SDR.jpg 200w,\n/static/5f5a2cefb58bb96bdd87d815f55a9c14/da113/RTL-SDR.jpg 400w,\n/static/5f5a2cefb58bb96bdd87d815f55a9c14/e0a14/RTL-SDR.jpg 700w","sizes":"(max-width: 700px) 100vw, 700px"}}}},"html":"<h2 id=\"sdr-software-defined-radio\" style=\"position:relative;\"><a href=\"#sdr-software-defined-radio\" aria-label=\"sdr software defined radio permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[ SDR (Software Defined Radio) ]</h2>\n<p>Software Defined Radio (SDR)는 신호 처리 로직이 Hardware 내의 회로에서 고정된 것이 아니라 Software로 동작하도록 설계된 무선 통신 장비이다. 이를 이용하면 신호처리에 대한 업데이트도 쉽고 하나의 장비로 여러 종류의 통신을 지원할 수 있다.<br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5f5a2cefb58bb96bdd87d815f55a9c14/29d31/RTL-SDR.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIDBAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHcrNKOMH//xAAZEAEBAQADAAAAAAAAAAAAAAACAREAAxD/2gAIAQEAAQUCSgk7d4dxhVkQ+f/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABoQAAMAAwEAAAAAAAAAAAAAAAABERAhMlH/2gAIAQEABj8CrZeUbKoevH//xAAbEAADAAIDAAAAAAAAAAAAAAAAASEQMUFhgf/aAAgBAQABPyGcQy3QuWOyvcaZHKXPR4//2gAMAwEAAgADAAAAEODP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAIBABAAEEAAcAAAAAAAAAAAAAAREAQWFxECExUYGx4f/aAAgBAQABPxCGIWLuin0kesT4e+KAiHziIjealwgAlJn5T4/TaLcP/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"RTL-SDR\"\n        title=\"RTL-SDR\"\n        src=\"/static/5f5a2cefb58bb96bdd87d815f55a9c14/29d31/RTL-SDR.jpg\"\n        srcset=\"/static/5f5a2cefb58bb96bdd87d815f55a9c14/f93b5/RTL-SDR.jpg 300w,\n/static/5f5a2cefb58bb96bdd87d815f55a9c14/b4294/RTL-SDR.jpg 600w,\n/static/5f5a2cefb58bb96bdd87d815f55a9c14/29d31/RTL-SDR.jpg 700w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n오늘은 RTL-SDR이라는 실제 장비를 GNU Radio와 연결하여 장비를 통해 인식한 Signal을 살펴볼 것이다.  </p>\n<h2 id=\"sdr-driver-설치\" style=\"position:relative;\"><a href=\"#sdr-driver-%EC%84%A4%EC%B9%98\" aria-label=\"sdr driver 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[ SDR Driver 설치 ]</h2>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> rtl-sdr</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">lsusb\nrtl_test -t</code></pre></div>\n<p>usb device 인식은 잘 되었으나 rtl_test 결과 device를 사용할 수 없다면, 다음 파일을 설정해 줄 필요가 있다.  </p>\n<ul>\n<li>\n<p><code class=\"language-text\">/etc/modprobe.d/</code> 경로에 <code class=\"language-text\">blacklist-rtl.conf</code> 파일을 생성하여 내용을 적어주고 재부팅하자  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">blacklist dvb_usb_rtl28xxu</code></pre></div>\n</li>\n</ul>\n<h2 id=\"sdr-블록이-내장된-gnu-radio-설치\" style=\"position:relative;\"><a href=\"#sdr-%EB%B8%94%EB%A1%9D%EC%9D%B4-%EB%82%B4%EC%9E%A5%EB%90%9C-gnu-radio-%EC%84%A4%EC%B9%98\" aria-label=\"sdr 블록이 내장된 gnu radio 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[ SDR 블록이 내장된 GNU-Radio 설치 ]</h2>\n<p><a href=\"https://goo-gy.github.io/2021-07-13-gnuradio\">https://goo-gy.github.io/2021-07-13-gnuradio</a>에서 간단하게 GNU Radio를 설치하는 방법을 소개했지만, 아쉽게도 이 방법으로 설치할 경우 RTL-SDR 블록이 내장되어 있지 않다. 그래서 추가적으로 RTL-SDR 모듈을 설치하려고 하였지만 GNU Radio 3.8에서는 다른 좋은 방법을 찾지 못하고 GNU Radio 3.8을 설치할 때 같이 설치하는 방법만 발견하였다.  </p>\n<p><a href=\"https://gist.github.com/gbevan/8e583b9cf87aa3c58102251454fa48a6\">https://gist.github.com/gbevan/8e583b9cf87aa3c58102251454fa48a6</a><br>\n위 포스팅을 참고하면 되지만 몇 가지 수정할 부분이 있어 다시 정리하였다.  </p>\n<h3 id=\"pybomb-설치\" style=\"position:relative;\"><a href=\"#pybomb-%EC%84%A4%EC%B9%98\" aria-label=\"pybomb 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>pybomb 설치</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> python3-pip python3-apt\n<span class=\"token function\">sudo</span> -H pip3 <span class=\"token function\">install</span> PyBOMBS</code></pre></div>\n<h3 id=\"recipes-추가\" style=\"position:relative;\"><a href=\"#recipes-%EC%B6%94%EA%B0%80\" aria-label=\"recipes 추가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>recipes 추가</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> ~/sdr\n<span class=\"token builtin class-name\">cd</span> ~/sdr\npybombs auto-config\npybombs recipes <span class=\"token function\">add</span> gr-recipes git+https://github.com/gnuradio/gr-recipes.git\npybombs recipes <span class=\"token function\">add</span> gr-etcetera git+https://github.com/gnuradio/gr-etcetera.git\npybombs prefix init ~/sdr</code></pre></div>\n<h3 id=\"setup_envsh로-python3\" style=\"position:relative;\"><a href=\"#setup_envsh%EB%A1%9C-python3\" aria-label=\"setup_envsh로 python3 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>setup_env.sh로 python3</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sed</span> -i <span class=\"token string\">'s/2\\.6/3.6/g'</span> setup_env.sh\n<span class=\"token function\">sed</span> -i <span class=\"token string\">'s/2\\.7/3/g'</span> setup_env.sh</code></pre></div>\n<h3 id=\"gnuradio-recipe-수정\" style=\"position:relative;\"><a href=\"#gnuradio-recipe-%EC%88%98%EC%A0%95\" aria-label=\"gnuradio recipe 수정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>gnuradio recipe 수정</h3>\n<ul>\n<li><code class=\"language-text\">~/.pybombs/recipes/gr-recipes/gnuradio.lwr</code></li>\n<li>\"gitbranch\"를 <code class=\"language-text\">maint-3.8</code> 로 수정 (master로 되어 있을거임)</li>\n<li>config<em>opt에 `-DENABLE</em>CTRLPORT_THRIFT=OFF` 추가</li>\n</ul>\n<h3 id=\"uhd-설치\" style=\"position:relative;\"><a href=\"#uhd-%EC%84%A4%EC%B9%98\" aria-label=\"uhd 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>uhd 설치</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">source</span> ~/sdr/setup_env.sh\npybombs <span class=\"token function\">install</span> uhd\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> <span class=\"token function\">git</span> cmake g++ libboost-all-dev libgmp-dev <span class=\"token punctuation\">\\</span>\n  swig python3-numpy python3-mako python3-sphinx python3-lxml <span class=\"token punctuation\">\\</span>\n  doxygen libfftw3-dev libcomedi-dev libsdl1.2-dev libgsl-dev <span class=\"token punctuation\">\\</span>\n  libqwt-qt5-dev libqt5opengl5-dev python3-pyqt5 liblog4cpp5-dev <span class=\"token punctuation\">\\</span>\n  libzmq3-dev python3-yaml python3-click python3-click-plugins</code></pre></div>\n<h3 id=\"gnuradio-38-설치\" style=\"position:relative;\"><a href=\"#gnuradio-38-%EC%84%A4%EC%B9%98\" aria-label=\"gnuradio 38 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>gnuradio 3.8 설치</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">pybombs <span class=\"token function\">install</span> gnuradio</code></pre></div>\n<h3 id=\"gr-osmosdr-설치\" style=\"position:relative;\"><a href=\"#gr-osmosdr-%EC%84%A4%EC%B9%98\" aria-label=\"gr osmosdr 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>gr-osmosdr 설치</h3>\n<ul>\n<li>\n<p>~/.pybombs/recipes/gr-recipes/gr-iqbal.lwr 수정</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">category</span><span class=\"token punctuation\">:</span> common\n<span class=\"token key atrule\">depends</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">-</span> gnuradio\n<span class=\"token punctuation\">-</span> libosmo<span class=\"token punctuation\">-</span>dsp\n<span class=\"token key atrule\">description</span><span class=\"token punctuation\">:</span> Gnuradio I/Q balancing\n<span class=\"token comment\">#gitbranch: master</span>\n<span class=\"token key atrule\">gitbranch</span><span class=\"token punctuation\">:</span> maint<span class=\"token punctuation\">-</span><span class=\"token number\">3.8</span>\n<span class=\"token key atrule\">inherit</span><span class=\"token punctuation\">:</span> cmake\n<span class=\"token comment\"># Let's always build this from source, not binaries</span>\n<span class=\"token comment\">#source: git+https://git.osmocom.org/gr-iqbal</span>\n<span class=\"token key atrule\">source</span><span class=\"token punctuation\">:</span> git+https<span class=\"token punctuation\">:</span>//github.com/velichkov/gr<span class=\"token punctuation\">-</span>iqbal.git</code></pre></div>\n</li>\n<li>\n<p>~/.pybombs/recipes/gr-recipes/gr-osmosdr .lwr 수정</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">category</span><span class=\"token punctuation\">:</span> common\n<span class=\"token key atrule\">depends</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">-</span> uhd\n<span class=\"token punctuation\">-</span> rtl<span class=\"token punctuation\">-</span>sdr\n<span class=\"token punctuation\">-</span> osmo<span class=\"token punctuation\">-</span>sdr\n<span class=\"token punctuation\">-</span> hackrf\n<span class=\"token punctuation\">-</span> gnuradio\n<span class=\"token punctuation\">-</span> gr<span class=\"token punctuation\">-</span>iqbal\n<span class=\"token punctuation\">-</span> bladeRF\n<span class=\"token punctuation\">-</span> airspy\n<span class=\"token punctuation\">-</span> soapysdr\n<span class=\"token key atrule\">description</span><span class=\"token punctuation\">:</span> Interface API independent of the underlying radio hardware\n<span class=\"token comment\">#gitbranch: master</span>\n<span class=\"token key atrule\">gitbranch</span><span class=\"token punctuation\">:</span> maint<span class=\"token punctuation\">-</span><span class=\"token number\">3.8</span>\n<span class=\"token key atrule\">inherit</span><span class=\"token punctuation\">:</span> cmake\n<span class=\"token comment\"># Let's always build this from source, not binaries</span>\n<span class=\"token comment\">#source: git+https://git.osmocom.org/gr-osmosdr</span>\n<span class=\"token key atrule\">source</span><span class=\"token punctuation\">:</span> git+https<span class=\"token punctuation\">:</span>//github.com/velichkov/gr<span class=\"token punctuation\">-</span>osmosdr.git</code></pre></div>\n</li>\n<li>\n<p>설치</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">pybombs <span class=\"token function\">install</span> gr-osmosdr</code></pre></div>\n</li>\n</ul>\n<h3 id=\"gnuradio-실행\" style=\"position:relative;\"><a href=\"#gnuradio-%EC%8B%A4%ED%96%89\" aria-label=\"gnuradio 실행 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>gnuradio 실행</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">source</span> ~/sdr/setup_env.sh\ngnuradio-companion</code></pre></div>\n<p>gnuradio를 실행하기 전에 항상 setup_env.sh 파일을 실행시켜줘야 한다.  </p>\n<h2 id=\"rtl-sdr-테스트\" style=\"position:relative;\"><a href=\"#rtl-sdr-%ED%85%8C%EC%8A%A4%ED%8A%B8\" aria-label=\"rtl sdr 테스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[ RTL-SDR 테스트 ]</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 847px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b7de2959f59b3b7ae9b649705424a5e7/b2cef/rtl-sdr-block.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABJ0AAASdAHeZh94AAABJklEQVQoz4WSi07CQBBF+f+/MdEYRIWk4AOUEjGgQCiCFmihtZS2PLo9bktIXCDhZmdnM5m5mbmzuSRBIiGOBevVFn+xxPN8wmDFZrMlSRPSs0vM/KHt4yly+8f4Z0ZTH/BUbtJtj7HNNY4dIkSsEKlQyRTCL8PkLv9MudTgvTFkMopwZ5FMFkpRsIzod0067SHmyJWTrNUO08sw+tRf3igWauSvNLSSzqjn8NqyMcaOJPGlDAt8f8Gj3uPmukq92qX/6eC54fHIIomzDrVig9Jtjd6HRfgLcztiG8dKgWU53BceqGg6nZaJ74WnNRz0v8lfVri8KGYjeza4kvC/hnsvhNRT7BYphDhNGCxDppM51tTJzHMDGVsdbfcUlKUcBs4VnPs2fza/ZxaIUA9pAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"rtl-sdr-block\"\n        title=\"rtl-sdr-block\"\n        src=\"/static/b7de2959f59b3b7ae9b649705424a5e7/b2cef/rtl-sdr-block.png\"\n        srcset=\"/static/b7de2959f59b3b7ae9b649705424a5e7/5a46d/rtl-sdr-block.png 300w,\n/static/b7de2959f59b3b7ae9b649705424a5e7/0a47e/rtl-sdr-block.png 600w,\n/static/b7de2959f59b3b7ae9b649705424a5e7/b2cef/rtl-sdr-block.png 847w\"\n        sizes=\"(max-width: 847px) 100vw, 847px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>  </p>\n<ul>\n<li><strong>Frequency</strong><br>\n하드웨어에서 관찰하고자 하는 중심 주파수를 지정한다.  </li>\n<li><strong>Bandwidth</strong><br>\n하드웨어에서 관찰하고자 하는 주파수 영역의 범위를 지정한다.  </li>\n<li><strong>Sample Rate</strong><br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.666666666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAA3XAAAN1wFCKJt4AAABJ0lEQVQY0y1NvUrDYBS9gwjVTV/CwdGlfQWXxkjUycFNcHAQXEVwEnwAwYLPUEqhxSltEwUJNb82P3xIlIaomCbkhyTXL6EHDufec+89F05PLrcMOUhsPcGiQPS9HG01RGLGWGE+/yksy8TxeHLrua6AaYpFlpXVjCrmUYR5HOdVH4bhPZyfXWyXJR1QS5cWSGZRHRT8pjh9jlGTXdR1BYeD4d2370/roCo0jrFIknq3pMcl9f487xEYtr1pGLP259cHK4nvjG06e7bjsIRY7FPvbX80mhx0Og87zVZrg+f5XcMwjhRF4SRBONR0ndNUlZM1jXsVxeNBt9uE65srSNMU6CNwzQCSKKtrxBzUlwUQ4kK/34M2wwDFCmWDcn2pjaW3SrlW6T+lC9/pYpQQTQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Cont_to_digital.png\"\n        title=\"Cont_to_digital.png\"\n        src=\"/static/bc4377c852d877a03b16631260551979/0a47e/Cont_to_digital.png\"\n        srcset=\"/static/bc4377c852d877a03b16631260551979/5a46d/Cont_to_digital.png 300w,\n/static/bc4377c852d877a03b16631260551979/0a47e/Cont_to_digital.png 600w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n<a href=\"https://wiki.gnuradio.org/index.php/Guided_Tutorial_Introduction\">https://wiki.gnuradio.org/index.php/Guided<em>Tutorial</em>Introduction</a><br>\n하드웨어에서 얼마나 자주 signal을 캡처할 것인지를 지정한다. (Analog Signal을 Digital Signal로 변환해야 하기 때문에 sample rate가 필요하다)  </li>\n</ul>\n<p>장비의 성능상 모든 주파수 대역 완벽하게 관찰할 수는 없기 때문에 이런 설정들이 필요하다. 그 외에도 여러 설정값들이 있지만 이 정도만 살펴보자.  </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2e49dfc64195760d21a4c3f5554f34bb/6dd26/signal_data.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABJ0AAASdAHeZh94AAABJ0lEQVQoz61S2Y7DIAzM//9il6bdHumRRkkAAyF4iqEP26eVuhtp5PHYmAly098uOB+/cTrsC4Qf9i36awc9DZjHx6/Q44Dxccdwv6AJ3uE/vrRGeDOh8Y6KwMwfo5xPEcHOaBz9HIgPUM8VhzLQe3qZ5j+gOiwDp8li1ox5TtAmwdgMU7lokmvLcJ5hKYFchdS1rnVyjCUsCJQHtoqgFNBuGecz43hg7FqG+spQXHS1iWjViv7O2Oa8zfX9rtakd7NhdKeI6MXhaMsbxMgIof6CcHG0rlVLS8i3+1JblgrhKWVw7bMmVodWj/BksOT18aRfnEBGI+QNMPOES3cquuQSY3AlOqsrd7kmuaxNf+tAekIKlC3bgjW8R3nsd/29VxCymaG/4gkc2AtI+jl93AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"signal_data.png\"\n        title=\"signal_data.png\"\n        src=\"/static/2e49dfc64195760d21a4c3f5554f34bb/c1b63/signal_data.png\"\n        srcset=\"/static/2e49dfc64195760d21a4c3f5554f34bb/5a46d/signal_data.png 300w,\n/static/2e49dfc64195760d21a4c3f5554f34bb/0a47e/signal_data.png 600w,\n/static/2e49dfc64195760d21a4c3f5554f34bb/c1b63/signal_data.png 1200w,\n/static/2e49dfc64195760d21a4c3f5554f34bb/6dd26/signal_data.png 1597w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br>\nRTL-SDR 블록을 통해 외부에서 들어오는 Signal을 확인할 수 있다.  </p>\n<h2 id=\"signal-data-처리\" style=\"position:relative;\"><a href=\"#signal-data-%EC%B2%98%EB%A6%AC\" aria-label=\"signal data 처리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[ Signal Data 처리 ]</h2>\n<p>새로운 블록 만들어서 RTL-SDR로 들어오는 data를 코드로 한번 살펴보자.<br>\nOOT 블록을 만들 줄 모른다면 이전 포스터 <a href=\"https://goo-gy.github.io/2021-07-13-gnuradio\">https://goo-gy.github.io/2021-07-13-gnuradio</a>를 참고하자  </p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"> <span class=\"token keyword\">def</span> <span class=\"token function\">work</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> input_items<span class=\"token punctuation\">,</span> output_items<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    signal_size <span class=\"token operator\">=</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>input_items<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    output_items<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> numpy<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>normal<span class=\"token punctuation\">(</span>size<span class=\"token operator\">=</span>self<span class=\"token punctuation\">.</span>sending_size<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>output_items<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>GNU Radio의 블록은 work 함수를 통해 input을 읽어 들이고 output을 내보낸다.\ninput_items[k]와 output_items[k]은 init에서 설정한 type의 numpy 배열로 이루어져 있다. 이 배열로 들어오는 값은 신호의 <strong>Amplitude(진폭)</strong>을 의미하고, 각각의 값은 <strong>1/sample_rate (s) 간격</strong>으로 측정한 값이다.  </p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> sf<span class=\"token punctuation\">,</span> threshold<span class=\"token punctuation\">,</span> preamble_len<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    gr<span class=\"token punctuation\">.</span>sync_block<span class=\"token punctuation\">.</span>__init__<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span>\n        name<span class=\"token operator\">=</span><span class=\"token string\">\"weak_lora_detect\"</span><span class=\"token punctuation\">,</span>\n        in_sig<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>numpy<span class=\"token punctuation\">.</span>complex64<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        out_sig<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>numpy<span class=\"token punctuation\">.</span>complex64<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    self<span class=\"token punctuation\">.</span>set_output_multiple<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>sending_size<span class=\"token punctuation\">)</span></code></pre></div>\n<p>numpy 배열의 size는 <code class=\"language-text\">self.set_output_multiple(size)</code>통해서 설정할 수 있다. 이는 sample_rate와 관계없이, 한 work 함수에서 몇 개의 data를 처리할 것인지에 대한 설정이다.  </p>\n<h2 id=\"gnu-radio-참고\" style=\"position:relative;\"><a href=\"#gnu-radio-%EC%B0%B8%EA%B3%A0\" aria-label=\"gnu radio 참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[ GNU Radio 참고 ]</h2>\n<p><a href=\"https://wiki.gnuradio.org/index.php/Tutorials\">https://wiki.gnuradio.org/index.php/Tutorials</a>에서 GNU Radio에 대한 개념 설명과 Tutorial을 제공하니 부족한 부분이 있다면 참고해보길 바라며, 다음에는 GNU Radio를 이용한 Lora PHY 분석을 다뤄볼 예정이다.  </p>"},"primaryTag":{"name":"project","color":"#007acc"}},"pageContext":{"postId":"8c559912-7646-54e7-a1ba-ef65e2d23777","primaryTag":"project"}},"staticQueryHashes":["1116962356","1994268275","2206391224","2275848304","545095672"]}